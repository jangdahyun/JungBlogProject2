<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>마이페이지</title>
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <!-- Google Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Core theme CSS (includes Bootstrap)-->
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/css/uikit.min.css">
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Ajax -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- UIkit JS -->
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/js/uikit-icons.min.js"></script>
    
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    
    <!-- Custom CSS -->
    <link href="/css/my/header.css" rel="stylesheet">
</head>
<style>
    body {
        font-family: 'Noto Sans KR', sans-serif; /* 한글 폰트 */
        margin: 0;
        padding: 0;
        background-color: #f9fbfc; /* 배경색 */
        display: flex;
        min-height: 100vh;
        align-items: center;
        justify-content: center;
    }
    
    .menuBar {
        text-align: right;
        margin-top: 20px;
        margin-right: 30px;
        cursor: pointer;
    }
    
    #icon {
        margin-right: 10px;
    }
    
    table {
        width: 100%;
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
        border-collapse: separate; /* 셀 간 간격을 나눔 */
        border-spacing: 0; /* 셀 간 간격 없앰 */
    }
    
    th, td {
        padding: 15px; /* 셀 안 패딩 */
        text-align: left;
        border-bottom: 1px solid #dee2e6;
    }
    
    th {
        background-color: #d95460;
        color: #fff;
        font-weight: 600;
        text-transform: uppercase;
    }
    
    tbody tr:hover {
        background-color: #f2f2f2;
    }
    
    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }
    
    .pagination a {
        color: #007bff;
        padding: 10px 20px; /* 페이지 링크 패딩 */
        text-decoration: none;
        border: 1px solid #007bff;
        margin: 0 5px; /* 링크 간격 */
        border-radius: 5px;
        transition: background-color 0.3s;
    }
    
    .pagination a:hover {
        background-color: #007bff;
        color: #fff;
    }
    
    .pagination .active a {
        background-color: #007bff;
        color: #fff;
        pointer-events: none;
    }
    
    .pagination .disabled a {
        color: #ccc;
        pointer-events: none;
    }
</style>

<body style="display: flex;">
<th:block th:if="${categoryNum != null}">
	<input type="hidden" id="categoryNum" th:value="${categoryNum}"/>
</th:block>
	<!-- header -->
	<th:block th:insert="~{/my/header.html}"></th:block>
	
	<div id="container" class="container" style="margin-left: 30px; background: #F9FBFC; width: 1000px; height: 800px;">
		<div id="content" class="content">
			<div id="main" role="main">
				<div id="headertop" class="headertop">
					<div class="menuBar" style="text-align: right; margin-top: 20px; margin-right: 30px; cursor: pointer;">
                		<span id="icon" class="material-symbols-outlined" onclick="gotohome()">home</span>
                		<span id="icon" class="material-symbols-outlined" onclick="gotoblog()">book_2</span>
                		<span id="icon" class="material-symbols-outlined" onclick="file()">folder_open</span>
                		<span id="icon" class="material-symbols-outlined" onclick="gallery()">gallery_thumbnail</span>
                		<span id="icon" class="material-symbols-outlined" onclick="gotovideo()">videocam</span>
                		<span id="icon" class="material-symbols-outlined" onclick="news()">news</span>
					</div>
					</div>
					<table id="incident_list_table" class="uk-table uk-table-hover uk-table-divider uk-table-middle uk-table-small">
						<colgroup>
							<col width="45px" />
							<col width="120px" />
							<col width="200px" />
							<col width="95px" />
							<col width="90px" />
							<col width="60px" />
							<col width="60px" />
							<col width="60px" />
						</colgroup>
						<thead>
							<tr>
								<th class="" style="line-height: 2">NO</th>
								<th class="" >
									<select class="uk-select" id="selectBox" style="height: 25px" onchange="handleCategoryChange()">
						                <option selected value="0">카테고리</option>
						                <option th:each="category : ${categoryList}" th:value="${category}" th:selected="${(category == '블로그' ? 1 : category == '자료실' ? 2 : category == 'Gallery' ? 4 : 6 ) == categoryNum}">[[${category}]]</option>
						            </select>
								</th>
								<th class="" style="line-height: 2">제목</th>
								<th class="" style="line-height: 2">글쓴이</th>
								<th class="" style="line-height: 2">게시일</th>
								<th class="" style="line-height: 2">조회수</th>
								<th class="" style="line-height: 2">좋아요</th>
								<th class="" style="line-height: 2">공개여부</th>
							</tr>
						</thead>
						<tbody>
							<tr th:if="${#lists.isEmpty(pv.list)}">
								<td colspan="8">등록된 글이 없습니다.</td>
				    		</tr>
								<tr th:each="vo, vs : ${pv.list}" th:onclick="view(this)" style="cursor: pointer;">
									<td style="display: none;" class="idx">[[${vo.idx}]]</td>
									<td>[[${pv.totalCount - (pv.currentPage-1)*pv.sizeOfPage -
										vs.index}]]</td>
									<td class="categoryName">[[${vo.categoryName}]]</td>
									<td th:text="${#strings.length(vo.title) > 10 ? #strings.substring(vo.title, 0, 10) + '...' : vo.title}"></td>
									<td>[[${vo.member.nickName}]]</td>
									<td th:text="${#dates.format(vo.regDate, 'yy-MM-dd')}"></td>
									<td>[[${vo.readCount}]]</td>
									<td>[[${vo.countHeart}]]</td>
									<td style="text-align: center;">[[${vo.deleted == 0 ? 'O' : 'X'}]]</td>
								</tr>
						</tbody>
					</table>
					<div style="display: flex; align-items: center;justify-content: center;">
						[(${pv.pageList})]
					</div>
					
					
					
				</div>
			</div>
		</div>
    <script type="text/javascript">
	function view(obj) {
		// 클래스 이름이 idx인 요소의 텍스트 가져오기
	    let idxText = obj.querySelector('.idx').innerHTML;
	    // 클래스 이름이 categoryName인 요소의 텍스트 가져오기
	    let categoryNameText = obj.querySelector('.categoryName').innerHTML;

		switch (categoryNameText) {
			case "블로그": // 블로그 카테고리 선택 시
          	// 블로그 페이지로 이동
          	location.href = `/blog/view/${idxText}`;
          	break;
          
			case "자료실": // 자료실 카테고리 선택 시
			    // 자료실 페이지로 이동
			    location.href = `/fileboard/blog/${idxText}`;
			    break;
			    
			case "Gallery": // 갤러리 카테고리 선택 시
			    // 갤러리 페이지로 이동
			    location.href = `/gallery/${idxText}`;
			    break;
			    
			case "동영상": // 갤러리 카테고리 선택 시
			    // 갤러리 페이지로 이동
			    location.href = `/videoboard/blog/${idxText}`;
			    break;
			    
			default:
			    // 기본적으로 수행할 동작
			    break;
 			}

   		}
   
    function handleCategoryChange() {
        // 선택한 카테고리의 값을 가져옴
        var selectedCategory = document.getElementById("selectBox").value;

        // 선택한 카테고리에 따라 동작을 수행
        switch (selectedCategory) {
            case "0":   //전체 보기
                // 전체 페이지로 이동
                location.href = `?p=1`;
                break;
                
            case "블로그": // 블로그 카테고리 선택 시
                // 블로그 페이지로 이동
                location.href = `?p=1&categoryNum=1`;
                break;
                
            case "자료실": // 자료실 카테고리 선택 시
                // 자료실 페이지로 이동
                location.href = `?p=1&categoryNum=2`;
                break;
                
            case "QnA": // 갤러리 카테고리 선택 시
                // 갤러리 페이지로 이동
                location.href = `?p=1&categoryNum=5`;
                break;
                
            case "Gallery": // 갤러리 카테고리 선택 시
                // 갤러리 페이지로 이동
                location.href = `?p=1&categoryNum=4`;
                break;
                
            case "동영상": // 갤러리 카테고리 선택 시
                // 갤러리 페이지로 이동
                location.href = `?p=1&categoryNum=6`;
                break;
                
            default:
                // 기본적으로 수행할 동작
                break;
       }
}
    
    function gotohome() {
        // 여기에 이동할 주소를 입력합니다.
        var address = "/";
        // 현재 창에서 해당 주소로 이동합니다.
        window.location.href = address;
    }
    
    function gotoblog() {
        // 여기에 이동할 주소를 입력합니다.
        var address = "/blog";
        // 현재 창에서 해당 주소로 이동합니다.
        window.location.href = address;
    }
 
	 function gallery() {
	     // 여기에 이동할 주소를 입력합니다.
	     var address = "/gallery";
	     // 현재 창에서 해당 주소로 이동합니다.
	     window.location.href = address;
	 }
	 
	 function file() {
	      // 여기에 이동할 주소를 입력합니다.
	      var address = "/fileboard";
	      // 현재 창에서 해당 주소로 이동합니다.
	      window.location.href = address;
	  }
	
	 function download() {
	       // 여기에 이동할 주소를 입력합니다.
	       var address = "/gallery";
	       // 현재 창에서 해당 주소로 이동합니다.
	       window.location.href = address;
	   }
	 
	 function gotovideo() {
	        // 여기에 이동할 주소를 입력합니다.
	        var address = "/videoboard";
	        // 현재 창에서 해당 주소로 이동합니다.
	        window.location.href = address;
		}
	 
	 function news() {
	        // 여기에 이동할 주소를 입력합니다.
	        var address = "/news";
	        // 현재 창에서 해당 주소로 이동합니다.
	        window.location.href = address;
	    }
   	</script>
</body>
</html>